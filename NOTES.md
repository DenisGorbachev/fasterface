# Notes

## Needs

### Specialized programs for daily usage

* Description: must allow to perform common operations in one step
* Examples
  * Generate a new repository from a template
  * Clone a repo from a crates.io url
  * Generate a Rust struct from template (with derives + `use` statements for derives)
  * Delete a Rust module (+ delete the `mod` directives that include this module)
  * Run `build` in any repo (cross-ecosystwem, e.g. resolve to `npm build` or `cargo build` depending on the current directory)
* Notes
  * I even "paid" the upfront cost of developing these programs for myself

### Custom one-off programs

* Examples
  * Change the path of a local package in every project's Cargo.toml in `~/workspace`
  * Convert *.heic to *.jpg in a specific directory
* Notes
  * This use-case is already covered by a combo of LLM + generic commands (find, grep, etc)
    * But low readability
      * But you can just backup the files & run it

## Misc

* The prompt would likely contain variables
  * Examples
    * `Replace "hello" with "goodbye" in every Markdown file`
* The prompt may contain implicit variables
  * Examples
    * `Replace "hello" with "goodbye" in every Markdown file`
      * Contains an implicit "directory" variable
        * Could be the current directory
        * Could be any directory
* I tried a prompt `Replace "hello" with "goodbye" in every Markdown file` with Claude
  * The first solution was a bash script
    * It was obscure, I couldn't tell at a glance what exactly it was doing
    * It didn't ask the user to confirm each operation
    * It contained a bug: it used a syntax for `sed` that was not supported by macOS version of `sed`
  * The second solution was a Deno TypeScript module
    * It was slow: it read every file sequentially, not in parallel
    * It didn't ask the user to confirm each operation
* The [custom one-off programs](#custom-one-off-programs) have to be generated by LLM, exactly because they are "too custom".

## Features

* Security
  * Don't execute any action without user approval
* Batch permissions requests
  * For operations over the whole directory, it's better to request permissions for all files upfront (but only if the precise list of files is known)
* Semantic confirmation
  * Instead of asking "Read file {{path}}?", it's better to ask "Replace {{needle}} with {{haystack}} in {{path}}?"
* Batch confirmation
  * Instead of asking "Read file {{path}}?" multiple times, it's better to ask "Read any file in {{dir}}?"

## Implementation details

* There must be an LLM layer that translates the user queries into function calls
  * Otherwise it's impossible to match every user query that may contain variables

## TODO

* Recommend to prefix the repository name with the {{project_name}} (this project name)
